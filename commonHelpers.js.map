{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/img/info-icon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","export default \"__VITE_ASSET__1645ca07__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\"\nimport errorIconUrl from \"./img/error-icon.svg\"\nimport infoIconUrl from \"./img/info-icon.svg\"\n\n\nfunction renderImages(images = []) {\n    return gallery.insertAdjacentHTML(\"beforeend\", images.reduce((html, { webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return html + `\n      <li class = \"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\"/>\n        </a>\n         <ul class=\"info-list\">\n          <li class=\"info-item\">\n            <h2>Likes</h2>\n            <p>${likes}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Vievs</h2>\n            <p>${views}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Comments</h2>\n            <p>${comments}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Downloads</h2>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n       </li>\n        `\n    }, \"\"))\n};\nfunction getError(errorText) {\n    iziToast.error({\n        message: errorText,\n        messageColor: \"#FFF\",\n        messageSize: \"16px\",\n        messageLineHeight: \"24px\",\n        position: \"topRight\",\n        transitionIn: \"fadeInLeft\",\n        backgroundColor: \"#EF4040\",\n        title: \"Error\",\n        titleColor: \"#FFF\",\n        titleSize: \"16px\",\n        titleLineHeight: \"24px\",\n        timeout: 3000,\n        iconUrl: `${errorIconUrl}`,\n        theme: \"dark\",\n    });\n};\nfunction getInfo(infoText) { \n    iziToast.info({\n        message: infoText,\n        messageColor: \"#FFF\",\n        messageSize: \"16px\",\n        messageLineHeight: \"24px\",\n        position: \"topRight\",\n        transitionIn: \"fadeInLeft\",\n        backgroundColor: \"#09F\",\n        title: \"\",\n        timeout: 3000,\n        iconUrl: `${infoIconUrl}`,\n        theme: \"dark\",\n    });\n};\nfunction addLoading() {\nloader.classList.remove(\"is-hidden\")\n};\nfunction removeLoading() {\nloader.classList.add(\"is-hidden\")\n};\nfunction clearHtmlElement(htmlElement) {\n    htmlElement.innerHTML = \"\";\n};\nasync function fetchImages() {\n    const API_KEY = \"41789210-2260d99c0029effaf849d1b98\";\n    const pixabayInstance = axios.create({\n        baseURL: `https://pixabay.com/api/`,\n    });\n    try {\n       const fetchedImages = await pixabayInstance.get(\"\", {\n        params: {\n            key: `${API_KEY}`,\n            q: `${query}`,\n            image_type: `photo`,\n            orientation: `horizontal`,\n            safesearch: `true`,\n            per_page: `${perPage}`,\n            page: `${page}`\n        }\n    });\n    return fetchedImages.data; \n    } catch (error) {\n        console.log(error.message);\n    }\n};\nasync function renderGallery() {\n    addLoading(searchForm);\n    loadMoreBtn.hidden = true;\n    try {\n        if (page <= amountOfPages) {\n        const images = await fetchImages();\n               if (images.totalHits === 0) {\n        removeLoading();\n        getError(\"Sorry, there are no images match in your search query. Please try again!\");\n        return;\n            };  \n        removeLoading();\n        renderImages(images.hits);\n        gallerySimpleLightBox.refresh();\n        amountOfPages = Math.ceil(images.totalHits / perPage);\n        page++;\n        loadMoreBtn.hidden = false; \n          if (page > amountOfPages) {\n          loadMoreBtn.hidden = true;\n              getInfo(\"We're sorry, but you've reached the end of search results.\")\n              loadMoreBtn.removeEventListener(\"click\", loadMore);\n            };};}\n    catch (error) {\n            removeLoading();\n            getError(\"URL Error\")\n            console.log(error);\n        };\n searchInput.value = \"\";\n};\nasync function loadMore() {\n await renderGallery();\n    const galleryItem = document.querySelector(\".gallery-item\")\n    const scrollHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n  top: (scrollHeight + 24) * 3,\n  behavior: \"smooth\",\n});\n};\n\n\nconst searchForm = document.querySelector(\".search-form\")\nconst searchInput = document.querySelector(\".search-form input\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".search-form [data-type = 'load-more']\");\nconst gallerySimpleLightBox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\nconst perPage = 39;\nlet amountOfPages = 2;\nlet query = \"\";\nlet page = 1;\n\n\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n        if (searchInput.value.trim() !== \"\")\n        {\n            clearHtmlElement(gallery);\n            gallery.classList.add(\"is-hidden\");\n            page = 1;\n            query = searchInput.value.trim();\n            await renderGallery();\n            gallery.classList.remove(\"is-hidden\");\n        } else {\n            getError(\"Please fill the query\")\n    };\n    loadMoreBtn.addEventListener(\"click\", loadMore);\n});\n\n"],"names":["errorIconUrl","infoIconUrl","renderImages","images","gallery","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getError","errorText","iziToast","getInfo","infoText","addLoading","loader","removeLoading","clearHtmlElement","htmlElement","fetchImages","API_KEY","pixabayInstance","axios","query","perPage","page","error","renderGallery","loadMoreBtn","amountOfPages","gallerySimpleLightBox","loadMore","searchInput","scrollHeight","searchForm","SimpleLightbox","event"],"mappings":"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"}