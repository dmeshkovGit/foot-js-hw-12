{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/img/info-icon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","export default \"__VITE_ASSET__1645ca07__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\"\nimport errorIconUrl from \"./img/error-icon.svg\"\nimport infoIconUrl from \"./img/info-icon.svg\"\n\n\nfunction renderImages(images = []) {\n    return gallery.insertAdjacentHTML(\"beforeend\", images.reduce((html, { webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return html + `\n      <li class = \"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\"/>\n        </a>\n         <ul class=\"info-list\">\n          <li class=\"info-item\">\n            <h2>Likes</h2>\n            <p>${likes}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Vievs</h2>\n            <p>${views}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Comments</h2>\n            <p>${comments}</p>\n          </li>\n          <li class=\"info-item\">\n            <h2>Downloads</h2>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n       </li>\n        `\n    }, \"\"))\n};\nfunction getError(errorText) {\n    iziToast.error({\n        message: errorText,\n        messageColor: \"#FFF\",\n        messageSize: \"16px\",\n        messageLineHeight: \"24px\",\n        position: \"topRight\",\n        transitionIn: \"fadeInLeft\",\n        backgroundColor: \"#EF4040\",\n        title: \"Error\",\n        titleColor: \"#FFF\",\n        titleSize: \"16px\",\n        titleLineHeight: \"24px\",\n        timeout: 3000,\n        iconUrl: `${errorIconUrl}`,\n        theme: \"dark\",\n    });\n};\nfunction getInfo(infoText) { \n    iziToast.info({\n        message: infoText,\n        messageColor: \"#FFF\",\n        messageSize: \"16px\",\n        messageLineHeight: \"24px\",\n        position: \"topRight\",\n        transitionIn: \"fadeInLeft\",\n        backgroundColor: \"#09F\",\n        title: \"\",\n        timeout: 3000,\n        iconUrl: `${infoIconUrl}`,\n        theme: \"dark\",\n    });\n};\nfunction addLoading(htmlElement) {\n    const loaderHtml = \"<span data-type='loading' class='loader'></span>\";\n    htmlElement.insertAdjacentHTML(\"beforeend\", loaderHtml) \n};\nfunction removeLoading() {\n    const loader = document.querySelector(\".loader\");\n    loader.remove()\n};\nfunction clearHtmlElement(htmlElement) {\n    htmlElement.innerHTML = \"\";\n};\nasync function fetchImages() {\n    const API_KEY = \"41789210-2260d99c0029effaf849d1b98\";\n    const pixabayInstance = axios.create({\n        baseURL: `https://pixabay.com/api/`,\n    });\n    try {\n       const fetchedImages = await pixabayInstance.get(\"\", {\n        params: {\n            key: `${API_KEY}`,\n            q: `${query}`,\n            image_type: `photo`,\n            orientation: `horizontal`,\n            safesearch: `true`,\n            per_page: `${perPage}`,\n            page: `${page}`\n        }\n    });\n    return fetchedImages.data; \n    } catch (error) {\n        console.log(error.message);\n    }\n};\nasync function renderGallery() {\n    addLoading(searchForm);\n    loadMoreBtn.hidden = true;\n    try {\n        if (page <= amountOfPages) {\n        const images = await fetchImages();\n    if (images.totalHits === 0) {\n        removeLoading();\n        getError(\"Sorry, there are no images matchinyour search query. Please try again!\");\n        } else {\n        removeLoading();\n        renderImages(images.hits);\n        gallerySimpleLightBox.refresh();\n        amountOfPages = Math.ceil(images.totalHits / perPage);\n        page++;\n        loadMoreBtn.hidden = false;\n        };} else {\n        removeLoading();\n        loadMoreBtn.hidden = true;\n        gallerySimpleLightBox.refresh();\n        getInfo(\"We're sorry, but you've reached the end of search results.\")}; \n    }\n    catch (error) {\n            removeLoading();\n            getError(\"URL Error\")\n            console.log(error.message);\n        };\n searchInput.value = \"\";\n};\n\n\nconst searchForm = document.querySelector(\".search-form\")\nconst searchInput = document.querySelector(\".search-form input\");\nconst gallery = document.querySelector(\".gallery\");\n\nconst loadMoreBtn = document.querySelector(\".search-form [data-type = 'load-more']\");\nconst gallerySimpleLightBox = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\nconst perPage = 39;\nlet amountOfPages = 1;\nlet query = \"\";\nlet page = 1;\n\n\n\nsearchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n  \n        if (searchInput.value.trim() !== \"\")\n        {\n            clearHtmlElement(gallery);\n            page = 1;\n            query = searchInput.value.trim();\n            await renderGallery();  \n        } else {\n            getError(\"Please fill the query\")\n    };\n});\nloadMoreBtn.addEventListener(\"click\", async () => {\n    await renderGallery();\n    const galleryItem = document.querySelector(\".gallery-item\")\n    const scrollHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n  top: (scrollHeight + 24) * 3,\n  behavior: \"smooth\",\n});\n});\n"],"names":["errorIconUrl","infoIconUrl","renderImages","images","gallery","html","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getError","errorText","iziToast","getInfo","infoText","addLoading","htmlElement","loaderHtml","removeLoading","clearHtmlElement","fetchImages","API_KEY","pixabayInstance","axios","query","perPage","page","error","renderGallery","searchForm","loadMoreBtn","amountOfPages","gallerySimpleLightBox","searchInput","SimpleLightbox","event","scrollHeight"],"mappings":"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"}